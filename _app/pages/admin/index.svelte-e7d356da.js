import{S as A,i as S,s as T,e as h,k as y,t as U,c as f,a as j,m as k,h as N,d as v,b as d,g as E,F as l,U as _,G as w,V as F,H as I,W as M,I as O,J as P}from"../../chunks/vendor-ebae9185.js";import{g as q}from"../../chunks/navigation-bd39ff07.js";import{s as b}from"../../chunks/stores-6663d0cd.js";import{A as B}from"../../chunks/API-7701e219.js";import"../../chunks/singletons-a6a7384f.js";function C(r){let s,t,o,e,p,u,c,i,m;return{c(){s=h("form"),t=h("input"),o=y(),e=h("input"),p=y(),u=h("button"),c=U("Se connecter"),this.h()},l(n){s=f(n,"FORM",{class:!0});var a=j(s);t=f(a,"INPUT",{type:!0,placeholder:!0}),o=k(a),e=f(a,"INPUT",{type:!0,placeholder:!0}),p=k(a),u=f(a,"BUTTON",{});var g=j(u);c=N(g,"Se connecter"),g.forEach(v),a.forEach(v),this.h()},h(){d(t,"type","text"),d(t,"placeholder","Identifiant"),d(e,"type","password"),d(e,"placeholder","Mot de Passe"),d(s,"class","svelte-evl2dv")},m(n,a){E(n,s,a),l(s,t),_(t,r[0].username),l(s,o),l(s,e),_(e,r[0].password),l(s,p),l(s,u),l(u,c),i||(m=[w(t,"input",r[2]),w(e,"input",r[3]),w(s,"submit",F(r[1]))],i=!0)},p(n,[a]){a&1&&t.value!==n[0].username&&_(t,n[0].username),a&1&&e.value!==n[0].password&&_(e,n[0].password)},i:I,o:I,d(n){n&&v(s),i=!1,M(m)}}}function G(r,s,t){let o;O(r,b,i=>t(4,o=i));let e={username:"",password:""};const p=async()=>{const{jwt:i,user:m}=await B.post("/auth/login",e);P(b,o.user=m,o),P(b,o.admin=!0,o),document.cookie=`jwt=${i}; path=/`,await q("/")};function u(){e.username=this.value,t(0,e)}function c(){e.password=this.value,t(0,e)}return[e,p,u,c]}class z extends A{constructor(s){super();S(this,s,G,C,T,{})}}export{z as default};

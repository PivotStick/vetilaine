import{S as C,i as M,s as B,e as p,t as q,c as v,a as $,h as j,d as u,g as k,F as f,G as F,H as I,k as E,m as A,b,I as K,J as D,K as L,w as R,L as U,x as Q,y as W,M as X,N as Y,O as Z,q as G,o as J,B as x}from"../chunks/vendor-ebae9185.js";import{A as O}from"../chunks/API-7701e219.js";import{b as P}from"../chunks/paths-4b3c6e7e.js";import{s as V}from"../chunks/stores-6663d0cd.js";function z(l){let e,t,a,n;return{c(){e=p("button"),t=q("Se d\xE9connecter")},l(o){e=v(o,"BUTTON",{});var i=$(e);t=j(i,"Se d\xE9connecter"),i.forEach(u)},m(o,i){k(o,e,i),f(e,t),a||(n=F(e,"click",l[1]),a=!0)},p:I,d(o){o&&u(e),a=!1,n()}}}function ee(l){let e,t,a,n,o,i,r,s,_,m,w,H,g,c=l[0].admin&&z(l);return{c(){e=p("header"),t=p("nav"),a=p("a"),n=q("Accueil"),o=E(),i=p("a"),r=q("Contacts"),s=E(),c&&c.c(),_=E(),m=p("h1"),w=q("Vetilaine."),H=E(),g=p("div"),this.h()},l(h){e=v(h,"HEADER",{class:!0});var d=$(e);t=v(d,"NAV",{class:!0});var y=$(t);a=v(y,"A",{href:!0,class:!0});var N=$(a);n=j(N,"Accueil"),N.forEach(u),o=A(y),i=v(y,"A",{href:!0,class:!0});var S=$(i);r=j(S,"Contacts"),S.forEach(u),s=A(y),c&&c.l(y),y.forEach(u),_=A(d),m=v(d,"H1",{class:!0});var T=$(m);w=j(T,"Vetilaine."),T.forEach(u),H=A(d),g=v(d,"DIV",{class:!0}),$(g).forEach(u),d.forEach(u),this.h()},h(){b(a,"href",""+(P+"/")),b(a,"class","svelte-1ooqfic"),b(i,"href",""+(P+"/about")),b(i,"class","svelte-1ooqfic"),b(t,"class","svelte-1ooqfic"),b(m,"class","svelte-1ooqfic"),b(g,"class","svelte-1ooqfic"),b(e,"class","svelte-1ooqfic")},m(h,d){k(h,e,d),f(e,t),f(t,a),f(a,n),f(t,o),f(t,i),f(i,r),f(t,s),c&&c.m(t,null),f(e,_),f(e,m),f(m,w),f(e,H),f(e,g)},p(h,[d]){h[0].admin?c?c.p(h,d):(c=z(h),c.c(),c.m(t,null)):c&&(c.d(1),c=null)},i:I,o:I,d(h){h&&u(e),c&&c.d()}}}function se(l,e,t){let a;return K(l,V,o=>t(0,a=o)),[a,async()=>{document.cookie="jwt=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/",D(V,a.user=await O.get("auth/session"),a),D(V,a.admin=!1,a)}]}class te extends C{constructor(e){super();M(this,e,se,ee,B,{})}}function ae(l){let e,t,a,n,o;t=new te({});const i=l[1].default,r=L(i,l,l[0],null);return{c(){e=E(),R(t.$$.fragment),a=E(),n=p("main"),r&&r.c(),this.h()},l(s){U('[data-svelte="svelte-oo86fz"]',document.head).forEach(u),e=A(s),Q(t.$$.fragment,s),a=A(s),n=v(s,"MAIN",{});var m=$(n);r&&r.l(m),m.forEach(u),this.h()},h(){document.title="Vetilaine"},m(s,_){k(s,e,_),W(t,s,_),k(s,a,_),k(s,n,_),r&&r.m(n,null),o=!0},p(s,[_]){r&&r.p&&(!o||_&1)&&X(r,i,s,s[0],o?Z(i,s[0],_,null):Y(s[0]),null)},i(s){o||(G(t.$$.fragment,s),G(r,s),o=!0)},o(s){J(t.$$.fragment,s),J(r,s),o=!1},d(s){s&&u(e),x(t,s),s&&u(a),s&&u(n),r&&r.d(s)}}}async function ce(l){return l.session.user=await O.get("auth/session"),l.session.admin=l.session.user.profiles.includes("admin"),{}}function oe(l,e,t){let{$$slots:a={},$$scope:n}=e;return l.$$set=o=>{"$$scope"in o&&t(0,n=o.$$scope)},[n,a]}class ue extends C{constructor(e){super();M(this,e,oe,ae,B,{})}}export{ue as default,ce as load};
